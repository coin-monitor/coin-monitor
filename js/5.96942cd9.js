(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"6ef9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-py-sm q-gutter-sm"},[a("q-inner-loading",{staticStyle:{"z-index":"100"},attrs:{showing:e.loadingVisible}},[a("q-spinner-puff",{attrs:{size:"50px",color:"red"}})],1),a("q-card",{staticClass:"q-ml-md q-mr-sm",attrs:{square:"",flat:""}},[a("q-list",{attrs:{dense:""}},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-item-label",{staticClass:"q-pt-sm",attrs:{caption:""}},[e._v("币种")])],1),a("q-item-section",[a("q-item-label",{staticClass:"q-pt-sm",attrs:{caption:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.symbolInput,expression:"symbolInput"}],attrs:{type:"text",placeholder:""},domProps:{value:e.symbolInput},on:{keydown:e.enterKeyGotoProject,input:function(t){t.target.composing||(e.symbolInput=t.target.value)}}}),a("span",{staticClass:"cursor-pointer",on:{click:function(t){return e.gotoProject(e.symbolInput)}}},[e._v(" 搜索")])])],1)],1)],1),a("div",{attrs:{id:"market"}}),e.market.length?a("q-card-section",{staticClass:"q-pr-lg",attrs:{align:"right"}},[a("q-option-group",{staticStyle:{"font-size":"0.8rem",color:"rgba(0, 0, 0, 0.54)"},attrs:{size:"1.1rem",options:e.periodOptions,color:"#3A5FD8",dense:"",inline:""},on:{input:e.periodChange},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}})],1):e._e()],1),e.market.length?a("q-card",{staticClass:"q-ml-md q-mr-sm",attrs:{square:"",flat:""}},[a("q-tabs",{attrs:{dense:"",align:"left",breakpoint:0},model:{value:e.secondTab,callback:function(t){e.secondTab=t},expression:"secondTab"}},[a("q-tab",{attrs:{name:"about"}},[e._v("关于")]),a("q-space")],1),a("q-tab-panels",{model:{value:e.secondTab,callback:function(t){e.secondTab=t},expression:"secondTab"}},[e.symbolDetail?[a("q-tab-panel",{attrs:{name:"about"}},[a("q-img",{staticClass:"q-mx-sm",staticStyle:{width:"18px"},attrs:{src:e.icon,"spinner-color":"red","spinner-size":"5px"}}),a("q-chip",{attrs:{dense:"",square:""}},[e._v(e._s(e.release))]),a("q-chip",{attrs:{dense:"",square:""}},[e._v(e._s(e.tag))]),a("p",{staticClass:"q-px-xs q-pt-sm"},[e._v(e._s(e.desc))]),a("div",{staticClass:"q-gutter-md q-pl-xs q-pt-sm"},[a("a",{staticStyle:{color:"#3A5FD8"},attrs:{href:e.site,target:"_blank"}},[e._v("官网")]),a("a",{staticStyle:{color:"#3A5FD8"},attrs:{href:e.paper,target:"_blank"}},[e._v("白皮书")])])],1)]:[a("q-tab-panel",{attrs:{name:"about"}},[a("p",{staticClass:"q-px-xs q-pt-sm"},[e._v("暂无")])])]],2)],1):e._e()],1)},r=[],s=a("967e"),i=a.n(s),o=(a("96cf"),a("fa84")),l=a.n(o),c=(a("7f7f"),{name:"PageMainProject",components:{},preFetch:function(e){e.store,e.currentRoute,e.previousRoute,e.redirect,e.ssrContext},data:function(){return{symbol:this.$route.params.currency.toUpperCase(),symbolInput:"",firstTab:"advice",secondTab:"about",period:"16h",periodOptions:[{label:"16小时",value:"16h"},{label:"7天",value:"7day"},{label:"1月",value:"1month"},{label:"半年",value:"6month"},{label:"3年",value:"3year"}],loadingVisible:!1,market:[],yMinValue:0,yMaxValue:0,openWarehouseLabelPoints:[],closeWarehouseLabelPoints:[],recentestUSD:null,recentestCNY:null,linePlot:null}},meta:function(){return{title:this.name+" ("+this.symbol+")",titleTemplate:function(e){return"".concat(e," - 加密货币策略监控系统 | 币控")}}},created:function(){},mounted:function(){var e=l()(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.apiMarket(this.$route.params.currency,t.period);case 3:t.market.length>0&&(t.linePlot=new window._G2Plot.Line("market",t.prepareLinePlotDataObject()),t.linePlot.render());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{periodChange:function(){var e=this;return l()(i.a.mark((function t(){var a;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.apiMarket(e.$route.params.currency,a.period);case 3:a.market.length>0&&(a.linePlot.destroy(),a.linePlot=new window._G2Plot.Line("market",a.prepareLinePlotDataObject()),a.linePlot.render());case 4:case"end":return t.stop()}}),t)})))()},apiMarket:function(e,t){var a=this;return l()(i.a.mark((function n(){var r,s,o;return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=a,r.loadingVisible=!0,s=r.$apis.Project+"/"+e+"/"+t,o=r.$q.localStorage.getItem(r.$store.state.setting.tokenName),n.abrupt("return",r.$axios.post(s,{},{headers:{Authorization:"Bearer "+o}}).then((function(t){var a=t.data.data;a.List?r.market=a.List:(r.$failure(e.toUpperCase()+" 没有行情数据"),setTimeout((function(){r.$router.push({name:"index"})}),2500)),r.loadingVisible=!1})).catch((function(){r.$failure("加载失败");var e=setTimeout((function(){"project"===r.$route.name?window.location.reload():clearTimeout(e)}),3e3)})));case 5:case"end":return n.stop()}}),n)})))()},prepareLinePlotDataObject:function(){var e=this;e.recentestUSD||(e.recentestUSD=e.market[0]["Close"],e.recentestCNY=Math.round(6.55*e.recentestUSD*100)/100);var t=e.parseMarketData(e.market);return{title:{visible:!0,text:e.name},description:{visible:!0,text:e.descriptionTextFormatter(e.symbol,e.recentestUSD,e.recentestCNY)},yAxis:{visible:!0,min:e.yMinValue,max:e.yMaxValue,formatter:function(t){return e.yAxisFormatter(t)}},guideLine:[{type:"mean",lineStyle:{stroke:"#3A5FD8",lineDash:[2,4]},text:{position:"end",content:"",style:{fill:"#3A5FD8"}}}],markerPoints:[{visible:!0,data:e.openWarehouseLabelPoints,label:{visible:!0,field:"Result"}},{visible:!0,data:e.closeWarehouseLabelPoints,symbol:"cross",label:{visible:!0,field:"Result",position:"bottom",offsetY:8},style:{normal:{stroke:"rgba(255, 0, 0, 0.65)",lineWidth:2}}}],color:["#6693EA"],lineSize:1,smooth:!0,data:t,xField:"marketTime",yField:"USD",interactions:[{type:"slider",cfg:{start:0,end:1}}]}},descriptionTextFormatter:function(e,t,a){return"".concat(e," 现价 $").concat(t," (").concat(a,")")},yAxisFormatter:function(e){var t=Math.round(7.1*e*100)/100;return this.currentLtSmScreen()?"$".concat(e):"$".concat(e," (").concat(t,")")},currentLtSmScreen:function(){return this.$q.screen.lt.sm},parseMarketData:function(e){for(var t=this,a=[],n=[],r=e[0]["Timestamp"]-e[1]["Timestamp"],s=0;s<e.length;s++){var i=e[s]["Close"];a.push(i);var o=null;o=r<=300?"hh:mm":r>300&&r<28800?"MM-dd hh:mm":"yyyy-MM-dd";var l=t.$formatDate(new Date(1e3*e[s]["Timestamp"]),o),c={marketTime:l,USD:i};n.unshift(c),"7day"===t.period||"1month"===t.period?("开仓"===e[s]["Result"]&&t.openWarehouseLabelPoints.push({marketTime:l}),"平仓"===e[s]["Result"]&&t.closeWarehouseLabelPoints.push({marketTime:l})):t.openWarehouseLabelPoints=[]}return t.yMinValue=Math.min.apply(Math,a),t.yMaxValue=Math.max.apply(Math,a),n},gotoProject:function(e){var t={name:"project",params:{currency:e.toLowerCase()}};this.$router.push(t),setTimeout((function(){window.location.reload()}),500)},enterKeyGotoProject:function(e){13===e.keyCode&&this.gotoProject(this.symbolInput)}},computed:{isAuthenticated:function(){return this.$store.state.member.isAuthenticated},symbolDetail:function(){return this.$store.state.setting.symbols[this.symbol]},icon:function(){return this.symbolDetail?this.symbolDetail.icon:""},name:function(){return this.symbolDetail?this.symbolDetail.name:""},release:function(){return this.symbolDetail?this.symbolDetail.release:""},tag:function(){return this.symbolDetail?this.symbolDetail.tag:""},desc:function(){return this.symbolDetail?this.symbolDetail.desc:""},site:function(){return this.symbolDetail?this.symbolDetail.site:""},paper:function(){return this.symbolDetail?this.symbolDetail.paper:""}}}),u=c,m=(a("dc48"),a("2877")),p=a("9989"),d=a("74f7"),b=a("06d5"),h=a("f09f"),f=a("429b"),y=a("7460"),v=a("adad"),g=a("823b"),q=a("068f"),k=a("b047"),x=a("0170"),D=a("1c1c"),P=a("eb85"),w=a("66e5"),C=a("4074"),T=a("a370"),S=a("9f0a"),M=a("2c91"),L=a("eebe"),$=a.n(L),_=Object(m["a"])(u,n,r,!1,null,"548e63c9",null);t["default"]=_.exports;$()(_,"components",{QPage:p["a"],QInnerLoading:d["a"],QSpinnerPuff:b["a"],QCard:h["a"],QTabs:f["a"],QTab:y["a"],QTabPanels:v["a"],QTabPanel:g["a"],QImg:q["a"],QChip:k["a"],QItemLabel:x["a"],QList:D["a"],QSeparator:P["a"],QItem:w["a"],QItemSection:C["a"],QCardSection:T["a"],QOptionGroup:S["a"],QSpace:M["a"]})},dc48:function(e,t,a){"use strict";var n=a("e52e"),r=a.n(n);r.a},e52e:function(e,t,a){}}]);